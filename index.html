
<html>
	<head>
		<script src="phonegap.js"></script>	
		<script src="jquery-3.1.0.min.js"></script>

	</head>
	<body>
		<h1>Okta SE demo app</h1>
		<p>A window should open now... or now...</p>
		<a id="lnk_linkedin" href="#">LinkedIn</a>
		<p id="lbl_token"></p>
	</body>
	<script>

// function to open browser
		function openBrowser(redirurl) {
			//alert("device is ready");
			var ref = window.open(redirurl, '_blank', 'location=yes');
			ref.addEventListener('loadstop', function(event) {        
			if (event.url.match("http://stop/app")) {
					var url = event.url;
					$('#lbl_token').html(url.hash.substr(1));
					
					ref.close();
				}
			});
		}
		
// When device is ready
		document.addEventListener("deviceready", onDeviceReady, false);
		function onDeviceReady() {
//			openBrowser('http://www.booons.nl/sedemo/');
		}
		$('#lnk_linkedin').click( function() {
			ref = openBrowser('https://randomcompany.okta-emea.com/oauth2/v1/authorize?idp=0oacyj8ypAB4J4gr30i6&client_id=QGSed7lDqb73VA6UrrXw&response_type=id_token&scope=openid%20email%20profile&redirect_uri=http://stop/app&state=someState2&nonce=someNonce2', '_blank', 'location=no');
			
		}
	</script>
</html>